(function($) { var env = "production"; wp_e2 = window.wp_e2 || {}; wp_e2.echo_version = "3.1"; /* var commentFiles = [ {"echo css" : "//js.washingtonpost.com/pb/resources/css/echo2/twp/v3.1.1/twp_comments_echo2.css&v=3.1&token=201602091430PST"}, {"echoDateFormat" : "//js.washingtonpost.com/pb/resources/js/echo2/twp/util/date.format.js&v=3.1&token=201602091430PST"}, {"json" : "//js.washingtonpost.com/pb/resources/js/echo2/twp/plugin/jquery.json-2.3.js&v=3.1&token=201602091430PST"}, {"lockfixed" : "//js.washingtonpost.com/pb/resources/js/echo2/twp/plugin/plugin.lockfixed.js&v=3.1&token=201602091430PST"}, {"echoContainerPlugin" : "//js.washingtonpost.com/pb/resources/js/echo2/twp/plugin/plugin.jquery.echo-container-3.1.0.js&v=3.1&token=201602091430PST"}, {"echoUtils" : "//js.washingtonpost.com/pb/resources/js/echo2/twp/util/utils.js&v=3.1&token=201602091430PST"}, {"echo-base" : "//js.washingtonpost.com/pb/resources/js/echo2/twp/util/util.url-1.0.0.js&v=3.1&token=201602091430PST"}, {"core" : "//js.washingtonpost.com/pb/resources/js/echo2/sdk/v3/loader.js&v=3.1&token=201602091430PST"}, {"echoCoreScripts1" : "//js.washingtonpost.com/pb/resources/js/echo2/twp/v3.1/core/twp_comments_echo2_config.js&v=3.1&token=201602091430PST"}, {"backplane" : "//js.washingtonpost.com/pb/resources/js/echo2/sdk/v3/dev/backplane.js&v=3.1&token=201602091430PST"}, {"jquerypack" : "//js.washingtonpost.com/pb/resources/js/echo2/sdk/v3/third-party/jquery.pack.js&v=3.1&token=201602091430PST"}, {"environmentpack" : "//js.washingtonpost.com/pb/resources/js/echo2/sdk/v3/dev/environment.pack.js&v=3.1&token=201602091430PST"}, {"echoPlugins1" : "//js.washingtonpost.com/pb/resources/js/echo2/twp/v3.1/plugins/twp_community-flag.js&v=3.1&token=201602091430PST"}, {"echoPlugins2" : "//js.washingtonpost.com/pb/resources/js/echo2/twp/v3.1/plugins/twp_stream.js&v=3.1&token=201602091430PST"}, {"echoPlugins3" : "//js.washingtonpost.com/pb/resources/js/echo2/twp/v3.1/plugins/twp_submit.js&v=3.1&token=201602091430PST"}, {"core" : "//js.washingtonpost.com/pb/resources/js/echo2/sdk/v3/dev/streamserver.pack.js&v=3.1&token=201602091430PST"}, {"echoCoreScripts2" : "//js.washingtonpost.com/pb/resources/js/echo2/wapo/wapo_echo_addon.js&v=3.1&token=201602091430PST"}, {"echoCoreScripts3" : "//js.washingtonpost.com/pb/resources/js/echo2/twp/v3.1/core/twp_comments_echo2.js&v=3.1&token=201602091430PST"}, {"app" : "//js.washingtonpost.com/pb/resources/js/echo2/apps/conversations/v1.3.8/app.js&v=3.1&token=201602091430PST"} ]; window.head_conf = {head: "TWPHead"}; if (typeof window.TWPHead == 'undefined') { var jsHeadJs = "//js.washingtonpost.com/pb/resources/js/head.min.js"; var jsscript = document.createElement('script'); jsscript.onload = jsscript.onreadystatechange = function(){ if ( this.readyState && this.readyState != "complete" && this.readyState != "loaded" ) { return; } TWPHead.load(commentFiles); }; jsscript.src = jsHeadJs; var jssib = document.getElementsByTagName('script')[0]; jssib.parentNode.insertBefore(jsscript, jssib); } else { TWPHead && TWPHead.load(commentFiles); } */ var fileList = []; fileList.push("//js.washingtonpost.com/pb/gr/c/javascript/rQb37z1BzCF9bp/twp-comments_css/65a4176fb3.css?_=c4210&v=3.1");fileList.push("//js.washingtonpost.com/pb/gr/c/javascript/rQb37z1BzCF9bp/twp-comments_utils/c1b61e7ebc.js?_=7db9a&v=3.1");fileList.push("//js.washingtonpost.com/pb/gr/c/javascript/rQb37z1BzCF9bp/twp-comments_core-production/fa6ed21812.js?_=e9efb&v=3.1");fileList.push("//js.washingtonpost.com/pb/gr/c/javascript/rQb37z1BzCF9bp/twp-comments_twp_plugins/1a4ed9a5cb.js?_=0b3af&v=3.1");fileList.push("//js.washingtonpost.com/pb/gr/c/javascript/rQb37z1BzCF9bp/twp-comments_controls-production/3f788937d5.js?_=ed269&v=3.1");fileList.push("//js.washingtonpost.com/pb/gr/c/javascript/rQb37z1BzCF9bp/twp-comments_wapo-production/6d91ec22a1.js?_=33d96&v=3.1");fileList.push("//js.washingtonpost.com/pb/gr/c/javascript/rQb37z1BzCF9bp/twp-comments_twpapp/aa8680d897.js?_=5bb8d&v=3.1"); if (window.jQuery && typeof jQuery.cookie === 'undefined') { fileList.unshift("//js.washingtonpost.com/pb/gr/c/javascript/rQb37z1BzCF9bp/twp-comments_cookie/4cc3c1bef0.js?_=bd567" ); } if (typeof jQuery === 'undefined') { fileList.unshift("//js.washingtonpost.com/pb/gr/c/javascript/rQb37z1BzCF9bp/twp-comments_jquery/0efd08c0d4.js?_=bd567" ); } /* function checkBundle(){ if (typeof window.ResourceBundle === 'undefined') { setTimeout(checkBundle, 500); } else { console.time("Comments load"); $(window.document).trigger('twp.page|comments.load.start'); ResourceBundle.when('pb-r-identity').then(function(){ wp_import(fileList) .always(function() { $(window.document).trigger('twp.page|comments.load.complete'); console.timeEnd("Comments load"); }) .fail(function(a, b) { try { console.error(a, b); } catch(e) { } }); }); } } checkBundle(); */ console.time("Comments load"); window.head_conf = {head: "TWPHead"}; if (typeof window.TWPHead == 'undefined') { var jsHeadJs = "//js.washingtonpost.com/pb/resources/js/head.min.js"; var jsscript = document.createElement('script'); jsscript.onload = jsscript.onreadystatechange = function(){ if ( this.readyState && this.readyState != "complete" && this.readyState != "loaded" ) { return; } TWPHead.load(fileList,function(){ console.timeEnd("Comments load"); }); }; jsscript.src = jsHeadJs; var jssib = document.getElementsByTagName('script')[0]; jssib.parentNode.insertBefore(jsscript, jssib); } else { TWPHead && TWPHead.load(fileList,function(){ console.timeEnd("Comments load"); }); } })(jQuery);